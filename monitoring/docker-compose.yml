version: "3"
services:

  dozzle:
    container_name: dozzle
    image: amir20/dozzle:latest
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - 8081:8080
    restart: always

  pialert:
    container_name: pialert
    # use the below line if you want to test the latest dev image
    # image: "jokobsk/pi.alert_dev:latest" 
    image: "jokobsk/pi.alert:latest"          
    restart: unless-stopped
    network_mode: "host"    
    ports:
      - "80:20211/tcp"
    volumes:
      - ${DOCKER_DATA_BASEFOLDER}/pialert/config:/home/pi/pialert/config
      - ${DOCKER_DATA_BASEFOLDER}/pialert/db:/home/pi/pialert/db      
      # (optional) useful for debugging if you have issues setting up the container
      #- ${DOCKER_DATA_BASEFOLDER}/pialert/logs:/home/pi/pialert/front/log
    environment:
      - TZ=Europe/Rome      
      - HOST_USER_ID=1000
      - HOST_USER_GID=1000

  glances:
    #docs https://glances.readthedocs.io/en/latest/docker.html
    image: nicolargo/glances:latest-full
    container_name: glances
    pid: host
    network_mode: host
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /etc/os-release:/etc/os-release:ro
    environment:
      - "GLANCES_OPT=-w"

      