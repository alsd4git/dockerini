# Beszel Stack

Simple, lightweight server monitoring with Docker stats, historical data, and alerts.

## Features

- **Server Monitoring**: Real-time monitoring of server resources and performance
- **Docker Integration**: Native Docker support with agent for container management
- **Historical Data**: Track performance metrics over time
- **Alerts**: Configure alerts for various monitoring thresholds
- **Web Interface**: User-friendly web interface for server management
- **Self-Hosted**: Complete control over your monitoring infrastructure

## Configuration

### Required Environment Variables

- `DOCKER_DATA_BASEFOLDER`: Base directory for persistent data storage
- `BESZEL_SSH_KEY`: SSH public key for authentication (replace with your actual key)


### Volume Mappings

- `${DOCKER_DATA_BASEFOLDER}/beszel/beszel_data`: Persistent data storage
- `${DOCKER_DATA_BASEFOLDER}/beszel/beszel_socket`: Socket communication between services

## Usage

1. **Setup Environment Variables**:
   - Copy `.env.example` to `.env`
   - Update the `DOCKER_DATA_BASEFOLDER` path
   - Replace `BESZEL_SSH_KEY` with your actual SSH public key

2. **Start the Stack**:

   ```bash
   docker-compose up -d
   ```

3. **Access Web Interface**:
   - Navigate to `http://your-server:8090`
   - The server will generate SSH keys when you add new clients

4. **Add Monitoring Clients**:
   - Use the web interface to add new clients
   - The server will provide the SSH key to use with the corresponding agent

## Port Documentation

### External Ports (Mapped to Host)
- `8090`: Web interface

### Internal Ports (Exposed for Reverse Proxy)

- `8090`: Web interface (for reverse proxy access)

## Security Considerations

- **SSH Key Authentication**: SSH keys are generated by the server when adding clients
- **Docker Socket Access**: The agent requires access to Docker socket for container management
- **Port Exposure**: Consider using reverse proxy for production deployments

## Troubleshooting

### Common Issues

1. **Agent Connection Issues**:
   - Verify the SSH key provided by the server matches the agent configuration
   - Check that both containers can access the shared socket volume
   - Verify Docker socket permissions for the agent container

2. **Port Already in Use**:
   - Change the port mapping in the compose file if needed

### Verification Steps

1. Check container status:

   ```bash
   docker-compose ps
   ```

2. View logs:

   ```bash
   docker-compose logs beszel
   docker-compose logs beszel-agent
   ```

3. Test web interface accessibility:

   ```bash
   curl http://localhost:8090
   ```

## Additional Resources

- [Official Beszel Documentation](https://beszel.dev/)
- [Getting Started Guide](https://beszel.dev/guide/getting-started)

## Maintenance

- **Updates**: Pull the latest images regularly for security updates
- **Backups**: Backup the `beszel_data` volume for configuration persistence
- **Monitoring**: Monitor container logs for any issues or errors 